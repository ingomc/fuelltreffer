---
// Header.astro - Sticky Navigation Header
const ligaTeams = [
  { id: '308863', name: 'VFB Einberg 2' },
  { id: '308864', name: 'ESV Darter' },
  { id: '308865', name: '1. DC DownFillCreek 2' },
  { id: '308866', name: 'DC Fire and Ice' },
  { id: '308867', name: 'LTV Gauerstadt' },
  { id: '308868', name: 'SCO-Darts Team F√ºlltreffer' },
  { id: '308869', name: 'TSG 2005 Bamberg 2' },
  { id: '308870', name: 'Erlauer SV' }
];

// Get current team from URL parameter
const url = new URL(Astro.request.url);
const selectedTeamId = url.searchParams.get('team') || '308868';
---

<!-- Sticky Header mit Team-Auswahl -->
<header class="sticky top-0 z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 shadow-sm transition-colors duration-200">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <div class="flex items-center space-x-3">
        <a 
          href="/" 
          class="text-xl font-bold text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors"
          title="Zur Startseite"
        >
          üéØF√ºlltreffer
        </a>
      </div>
      
      <!-- Team-Auswahl Dropdown -->
      <div class="relative">
        <div id="team-selector" class="flex items-center">
          <span class="text-sm text-gray-600 dark:text-gray-400 mr-2 hidden sm:inline transition-colors duration-200">üèÜ</span>
          <select 
            id="header-team-select" 
            class="text-sm border border-gray-300 dark:border-gray-600 rounded-md px-3 py-1 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 transition-colors duration-200"
          >
            {ligaTeams.map(team => (
              <option value={team.id} selected={team.id === selectedTeamId}>
                {team.name}
              </option>
            ))}
          </select>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  // Handle team selection change
  document.addEventListener('DOMContentLoaded', () => {
    const select = document.getElementById('header-team-select');
    if (select) {
      select.addEventListener('change', (event) => {
        const selectedTeamId = (event.target as HTMLSelectElement).value;
        if (selectedTeamId) {
          // Navigate to URL with team parameter, preserve existing tab parameter
          const url = new URL(window.location.href);
          url.searchParams.set('team', selectedTeamId);
          // Keep existing tab parameter if present
          window.location.href = url.toString();
        }
      });
    }
  });
</script>
